package cn.uce.suc.bkg.biz.impl.datamain;

import java.util.List;

import javax.annotation.Resource;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;






import com.alibaba.fastjson.JSON;

import cn.uce.base.page.Page;
import cn.uce.base.page.Pagination;
import cn.uce.suc.bkg.biz.datamain.IDirverBiz;
import cn.uce.suc.bkg.entity.datamain.Dirver;
import cn.uce.suc.bkg.vo.datamain.DirverVo;

/**
 * 
 * @Description: 司机管理测试类
 * @author zhangqiang
 * @date 2017年11月1日 下午7:55:47
 */
@WebAppConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath*:spring-*.xml", "classpath*:*/spring-*.xml" })
public class DriverBizTest {
	
	/**
	 * biz注入		
	 */
	@Resource
	private IDirverBiz dirverBiz;
	/**
	 * 司机实体类
	 */
	private Dirver dirver;
	/**
	 * page对象
	 */
	private Page page;
	/**
	 * vo对象
	 */
	private DirverVo dirverVo;
	/**
	 * 
	 * @Description: 初始化方法
	 * @author zhangqiang
	 * @date 2017年11月6日 下午10:01:47
	 */
	@Before
	public void init() {
		System.out.println("==========单元测试开始========");
		dirver = new Dirver();
		page = new Page();
		dirver.setDriverName("关羽");
		dirver.setMobilePhone("1503110000");
		dirver.setDrivingNumber("test");
	}
	/**
	 * 
	 * @Description: 运行完成
	 * @author zhangqiang
	 * @date 2017年11月6日 下午10:02:00
	 */
	@After
	public void excuteEnd() {
		System.out.println("==========单元测试结束========");
	}
	/**
	 * 
	 * @Description: 测试方法
	 * @author zhangqiang
	 * @date 2017年11月6日 下午10:02:16
	 */
	@Test
	public void test(){
		dirverBiz.addDirver(dirver);
		dirverVo=JSON.parseObject(JSON.toJSONString(dirver),DirverVo.class);
		Pagination<Dirver> driver = dirverBiz.findByCondition(dirverVo, page);
		List<Dirver> list = driver.getData();
		for(Dirver d : list){
			if("关羽".equals(d.getDriverName())){
				dirver = d;
				break;
			}
		}
		dirverVo=JSON.parseObject(JSON.toJSONString(dirver),DirverVo.class);
		dirverBiz.findByDrivingNum(dirver.getDrivingNumber());
		dirverBiz.findByExport(dirverVo);
		dirverBiz.findDriverByCmbgd(dirverVo, page);
		dirverBiz.findByPagination(dirverVo, page);
		dirverBiz.updateDirver(dirver);
		dirverBiz.findById(dirver.getId());
		dirverBiz.deleteDirver(dirver.getId());
	}
}
