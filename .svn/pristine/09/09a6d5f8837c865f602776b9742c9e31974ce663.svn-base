package cn.uce.suc.dot.control;

import java.util.List;
import java.util.Map;

import javax.annotation.Resource;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

import cn.uce.suc.common.biz.ITruckCostManagementBiz;
import cn.uce.suc.common.service.MobileuserService;
import cn.uce.suc.common.util.BaseAppController;
import cn.uce.suc.common.vo.MobileuserVo;
import cn.uce.suc.common.vo.TruckCostManagementVo;
/**
 * 
 * @Description: 车辆信息查询
 * @author zhandesheng
 * @date 2017年10月30日 下午4:58:47
 */
@RestController
@RequestMapping("/app/truckCostManagement")
public class DotTruckCostManagementController extends BaseAppController{
	/**
	 * 注入车辆biz
	 */
	@Resource
	private ITruckCostManagementBiz truckCostManagementBiz;
	/**
	 * 注入mobileUserService
	 */
	@Resource
	private MobileuserService mobileUserService;
	
	/**
	 * 
	 * @Description: 查询车辆信息 
	 * @author zhandesheng
	 * @return 
	 * @date 2017年10月27日 下午3:26:13
	 */
	@GetMapping(value = "findTruckCostManagement")
	public @ResponseBody Map<String, Object> findTruckCostManagement(  @RequestParam(value="mobilePhone", required=true) String mobilePhone){
		MobileuserVo mobileuserVo = new MobileuserVo();
		mobileuserVo.setMobilephone(mobilePhone);
		mobileuserVo.setDotType(true);
		mobileuserVo.setDptType(false);
		List<MobileuserVo> mobileuserVos = mobileUserService.findByUserMobilephone(mobileuserVo );
		TruckCostManagementVo vo = new TruckCostManagementVo();
		if(null != mobileuserVos&&!mobileuserVos.isEmpty()){
			MobileuserVo muv = mobileuserVos.get(0);
			vo.setBelongSiteCode(muv.getOperateCenterCode());
		}
		List<TruckCostManagementVo> vos = truckCostManagementBiz.findByBelongSiteCode(vo);
		return returnSuccess(vos);
	}
}
