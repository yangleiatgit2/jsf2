package cn.uce.suc.bkg.biz.impl.datamain;

import java.util.List;

import javax.annotation.Resource;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;

import cn.uce.base.page.Page;
import cn.uce.base.page.Pagination;
import cn.uce.suc.bkg.biz.datamain.IOperationTimeBiz;
import cn.uce.suc.bkg.entity.datamain.OperationTime;
import cn.uce.suc.bkg.vo.datamain.OperationTimeVo;

import com.alibaba.fastjson.JSON;

@WebAppConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath*:spring-*.xml", "classpath*:*/spring-*.xml" })
/**
 * 
 * @Description: 分拨时刻测试类
 * @author zhangqiang
 * @date 2017年11月6日 上午10:14:30
 */
public class OperaTimeBizTest {
	/**
	 * biz注入
	 */
	@Resource
	private IOperationTimeBiz operationTimeBiz;
	/**
	 * 时刻实体类
	 */
	private OperationTime operationTime;
	/**
	 * 时刻vo
	 */
	private OperationTimeVo operationTimeVo;
	/**
	 * 页吗
	 */
	private Page page;
	/**
	 * 
	 * @Description: 初始化方法
	 * @author zhangqiang
	 * @date 2017年11月6日 下午10:03:21
	 */
	@Before
	public void init() {
		System.out.println("==========单元测试开始========");
		operationTime = new OperationTime();
		page = new Page();
		operationTime.setSiteCode("testcode");;
		operationTime.setSiteName("测试网店");
	}
	/**
	 * 
	 * @Description: 方法执行后
	 * @author zhangqiang
	 * @date 2017年11月6日 下午10:03:31
	 */
	@After
	public void excuteEnd() {
		System.out.println("==========单元测试结束========");
	}
	/**
	 * 
	 * @Description: 测试方法
	 * @author zhangqiang
	 * @date 2017年11月6日 下午10:03:44
	 */
	@Test
	public void test(){
		operationTimeBiz.addOperationTime(operationTime);
		operationTimeVo  = JSON.parseObject(JSON.toJSONString(operationTime),OperationTimeVo.class);
		Pagination<OperationTime> time = operationTimeBiz.findByCondition(operationTimeVo, page);
		List<OperationTime> list = time.getData();
		for(OperationTime o : list){
			if("testcode".equals(o.getSiteCode())){
				operationTime = o;
				break;
			}
		}
		operationTimeVo  = JSON.parseObject(JSON.toJSONString(operationTime),OperationTimeVo.class);
		operationTimeBiz.findByExport(operationTimeVo);
		operationTimeBiz.findById(operationTime.getId());
		operationTimeBiz.findByPagination(operationTimeVo, page);
		operationTimeBiz.updateOperationTime(operationTime);
		operationTimeBiz.deleteOperationTime(operationTime.getId());
	}
}
